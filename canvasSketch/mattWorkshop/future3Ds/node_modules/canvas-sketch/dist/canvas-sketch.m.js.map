{"version":3,"file":"canvas-sketch.m.js","sources":["../node_modules/object-assign/index.js","../node_modules/right-now/browser.js","../node_modules/is-promise/index.js","../node_modules/is-object/index.js","../node_modules/is-window/index.js","../node_modules/is-dom/index.js","../lib/util.js","../node_modules/object-keys/isArguments.js","../node_modules/object-keys/implementation.js","../node_modules/object-keys/index.js","../node_modules/is-arguments/index.js","../node_modules/object-is/index.js","../node_modules/function-bind/implementation.js","../node_modules/function-bind/index.js","../node_modules/has/src/index.js","../node_modules/is-regex/index.js","../node_modules/define-properties/index.js","../node_modules/regexp.prototype.flags/implementation.js","../node_modules/regexp.prototype.flags/polyfill.js","../node_modules/regexp.prototype.flags/shim.js","../node_modules/regexp.prototype.flags/index.js","../node_modules/is-date-object/index.js","../node_modules/deep-equal/index.js","../node_modules/dateformat/lib/dateformat.js","../node_modules/repeat-string/index.js","../node_modules/pad-left/index.js","../lib/save.js","../lib/accessibility.js","../lib/core/keyboardShortcuts.js","../lib/paper-sizes.js","../node_modules/defined/index.js","../node_modules/convert-length/convert-length.js","../lib/distances.js","../lib/core/resizeCanvas.js","../node_modules/get-canvas-context/index.js","../lib/core/createCanvas.js","../lib/core/SketchManager.js","../lib/canvas-sketch.js"],"sourcesContent":["/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","module.exports =\n  global.performance &&\n  global.performance.now ? function now() {\n    return performance.now()\n  } : Date.now || function now() {\n    return +new Date\n  }\n","module.exports = isPromise;\n\nfunction isPromise(obj) {\n  return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\n}\n","\"use strict\";\n\nmodule.exports = function isObject(x) {\n\treturn typeof x === \"object\" && x !== null;\n};\n","'use strict';\n\nmodule.exports = function (obj) {\n\n  if (obj == null) {\n    return false;\n  }\n\n  var o = Object(obj);\n\n  return o === o.window;\n};\n","var isObject = require('is-object')\nvar isWindow = require('is-window')\n\nfunction isNode (val) {\n  if (!isObject(val) || !isWindow(window) || typeof window.Node !== 'function') {\n    return false\n  }\n\n  return typeof val.nodeType === 'number' &&\n    typeof val.nodeName === 'string'\n}\n\nmodule.exports = isNode\n","// TODO: We can remove a huge chunk of bundle size by using a smaller\n// utility module for converting units.\nimport isDOM from 'is-dom';\n\nexport function getClientAPI () {\n  return typeof window !== 'undefined' && window['canvas-sketch-cli'];\n}\n\nexport function defined () {\n  for (let i = 0; i < arguments.length; i++) {\n    if (arguments[i] != null) {\n      return arguments[i];\n    }\n  }\n  return undefined;\n}\n\nexport function isBrowser () {\n  return typeof document !== 'undefined';\n}\n\nexport function isWebGLContext (ctx) {\n  return typeof ctx.clear === 'function' && typeof ctx.clearColor === 'function' && typeof ctx.bufferData === 'function';\n}\n\nexport function isCanvas (element) {\n  return isDOM(element) && /canvas/i.test(element.nodeName) && typeof element.getContext === 'function';\n}\n","'use strict';\n\nvar toStr = Object.prototype.toString;\n\nmodule.exports = function isArguments(value) {\n\tvar str = toStr.call(value);\n\tvar isArgs = str === '[object Arguments]';\n\tif (!isArgs) {\n\t\tisArgs = str !== '[object Array]' &&\n\t\t\tvalue !== null &&\n\t\t\ttypeof value === 'object' &&\n\t\t\ttypeof value.length === 'number' &&\n\t\t\tvalue.length >= 0 &&\n\t\t\ttoStr.call(value.callee) === '[object Function]';\n\t}\n\treturn isArgs;\n};\n","'use strict';\n\nvar keysShim;\nif (!Object.keys) {\n\t// modified from https://github.com/es-shims/es5-shim\n\tvar has = Object.prototype.hasOwnProperty;\n\tvar toStr = Object.prototype.toString;\n\tvar isArgs = require('./isArguments'); // eslint-disable-line global-require\n\tvar isEnumerable = Object.prototype.propertyIsEnumerable;\n\tvar hasDontEnumBug = !isEnumerable.call({ toString: null }, 'toString');\n\tvar hasProtoEnumBug = isEnumerable.call(function () {}, 'prototype');\n\tvar dontEnums = [\n\t\t'toString',\n\t\t'toLocaleString',\n\t\t'valueOf',\n\t\t'hasOwnProperty',\n\t\t'isPrototypeOf',\n\t\t'propertyIsEnumerable',\n\t\t'constructor'\n\t];\n\tvar equalsConstructorPrototype = function (o) {\n\t\tvar ctor = o.constructor;\n\t\treturn ctor && ctor.prototype === o;\n\t};\n\tvar excludedKeys = {\n\t\t$applicationCache: true,\n\t\t$console: true,\n\t\t$external: true,\n\t\t$frame: true,\n\t\t$frameElement: true,\n\t\t$frames: true,\n\t\t$innerHeight: true,\n\t\t$innerWidth: true,\n\t\t$onmozfullscreenchange: true,\n\t\t$onmozfullscreenerror: true,\n\t\t$outerHeight: true,\n\t\t$outerWidth: true,\n\t\t$pageXOffset: true,\n\t\t$pageYOffset: true,\n\t\t$parent: true,\n\t\t$scrollLeft: true,\n\t\t$scrollTop: true,\n\t\t$scrollX: true,\n\t\t$scrollY: true,\n\t\t$self: true,\n\t\t$webkitIndexedDB: true,\n\t\t$webkitStorageInfo: true,\n\t\t$window: true\n\t};\n\tvar hasAutomationEqualityBug = (function () {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined') { return false; }\n\t\tfor (var k in window) {\n\t\t\ttry {\n\t\t\t\tif (!excludedKeys['$' + k] && has.call(window, k) && window[k] !== null && typeof window[k] === 'object') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tequalsConstructorPrototype(window[k]);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}());\n\tvar equalsConstructorPrototypeIfNotBuggy = function (o) {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined' || !hasAutomationEqualityBug) {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t}\n\t\ttry {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tkeysShim = function keys(object) {\n\t\tvar isObject = object !== null && typeof object === 'object';\n\t\tvar isFunction = toStr.call(object) === '[object Function]';\n\t\tvar isArguments = isArgs(object);\n\t\tvar isString = isObject && toStr.call(object) === '[object String]';\n\t\tvar theKeys = [];\n\n\t\tif (!isObject && !isFunction && !isArguments) {\n\t\t\tthrow new TypeError('Object.keys called on a non-object');\n\t\t}\n\n\t\tvar skipProto = hasProtoEnumBug && isFunction;\n\t\tif (isString && object.length > 0 && !has.call(object, 0)) {\n\t\t\tfor (var i = 0; i < object.length; ++i) {\n\t\t\t\ttheKeys.push(String(i));\n\t\t\t}\n\t\t}\n\n\t\tif (isArguments && object.length > 0) {\n\t\t\tfor (var j = 0; j < object.length; ++j) {\n\t\t\t\ttheKeys.push(String(j));\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var name in object) {\n\t\t\t\tif (!(skipProto && name === 'prototype') && has.call(object, name)) {\n\t\t\t\t\ttheKeys.push(String(name));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (hasDontEnumBug) {\n\t\t\tvar skipConstructor = equalsConstructorPrototypeIfNotBuggy(object);\n\n\t\t\tfor (var k = 0; k < dontEnums.length; ++k) {\n\t\t\t\tif (!(skipConstructor && dontEnums[k] === 'constructor') && has.call(object, dontEnums[k])) {\n\t\t\t\t\ttheKeys.push(dontEnums[k]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn theKeys;\n\t};\n}\nmodule.exports = keysShim;\n","'use strict';\n\nvar slice = Array.prototype.slice;\nvar isArgs = require('./isArguments');\n\nvar origKeys = Object.keys;\nvar keysShim = origKeys ? function keys(o) { return origKeys(o); } : require('./implementation');\n\nvar originalKeys = Object.keys;\n\nkeysShim.shim = function shimObjectKeys() {\n\tif (Object.keys) {\n\t\tvar keysWorksWithArguments = (function () {\n\t\t\t// Safari 5.0 bug\n\t\t\tvar args = Object.keys(arguments);\n\t\t\treturn args && args.length === arguments.length;\n\t\t}(1, 2));\n\t\tif (!keysWorksWithArguments) {\n\t\t\tObject.keys = function keys(object) { // eslint-disable-line func-name-matching\n\t\t\t\tif (isArgs(object)) {\n\t\t\t\t\treturn originalKeys(slice.call(object));\n\t\t\t\t}\n\t\t\t\treturn originalKeys(object);\n\t\t\t};\n\t\t}\n\t} else {\n\t\tObject.keys = keysShim;\n\t}\n\treturn Object.keys || keysShim;\n};\n\nmodule.exports = keysShim;\n","'use strict';\n\nvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\nvar toStr = Object.prototype.toString;\n\nvar isStandardArguments = function isArguments(value) {\n\tif (hasToStringTag && value && typeof value === 'object' && Symbol.toStringTag in value) {\n\t\treturn false;\n\t}\n\treturn toStr.call(value) === '[object Arguments]';\n};\n\nvar isLegacyArguments = function isArguments(value) {\n\tif (isStandardArguments(value)) {\n\t\treturn true;\n\t}\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.length === 'number' &&\n\t\tvalue.length >= 0 &&\n\t\ttoStr.call(value) !== '[object Array]' &&\n\t\ttoStr.call(value.callee) === '[object Function]';\n};\n\nvar supportsStandardArguments = (function () {\n\treturn isStandardArguments(arguments);\n}());\n\nisStandardArguments.isLegacyArguments = isLegacyArguments; // for tests\n\nmodule.exports = supportsStandardArguments ? isStandardArguments : isLegacyArguments;\n","\"use strict\";\n\n/* https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.is */\n\nvar NumberIsNaN = function (value) {\n\treturn value !== value;\n};\n\nmodule.exports = function is(a, b) {\n\tif (a === 0 && b === 0) {\n\t\treturn 1 / a === 1 / b;\n\t} else if (a === b) {\n\t\treturn true;\n\t} else if (NumberIsNaN(a) && NumberIsNaN(b)) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n","'use strict';\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar slice = Array.prototype.slice;\nvar toStr = Object.prototype.toString;\nvar funcType = '[object Function]';\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.call(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slice.call(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                args.concat(slice.call(arguments))\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        } else {\n            return target.apply(\n                that,\n                args.concat(slice.call(arguments))\n            );\n        }\n    };\n\n    var boundLength = Math.max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs.push('$' + i);\n    }\n\n    bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n","'use strict';\n\nvar bind = require('function-bind');\n\nmodule.exports = bind.call(Function.call, Object.prototype.hasOwnProperty);\n","'use strict';\n\nvar has = require('has');\nvar regexExec = RegExp.prototype.exec;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar tryRegexExecCall = function tryRegexExec(value) {\n\ttry {\n\t\tvar lastIndex = value.lastIndex;\n\t\tvalue.lastIndex = 0;\n\n\t\tregexExec.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t} finally {\n\t\tvalue.lastIndex = lastIndex;\n\t}\n};\nvar toStr = Object.prototype.toString;\nvar regexClass = '[object RegExp]';\nvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\n\nmodule.exports = function isRegex(value) {\n\tif (!value || typeof value !== 'object') {\n\t\treturn false;\n\t}\n\tif (!hasToStringTag) {\n\t\treturn toStr.call(value) === regexClass;\n\t}\n\n\tvar descriptor = gOPD(value, 'lastIndex');\n\tvar hasLastIndexDataProperty = descriptor && has(descriptor, 'value');\n\tif (!hasLastIndexDataProperty) {\n\t\treturn false;\n\t}\n\n\treturn tryRegexExecCall(value);\n};\n","'use strict';\n\nvar keys = require('object-keys');\nvar hasSymbols = typeof Symbol === 'function' && typeof Symbol('foo') === 'symbol';\n\nvar toStr = Object.prototype.toString;\nvar concat = Array.prototype.concat;\nvar origDefineProperty = Object.defineProperty;\n\nvar isFunction = function (fn) {\n\treturn typeof fn === 'function' && toStr.call(fn) === '[object Function]';\n};\n\nvar arePropertyDescriptorsSupported = function () {\n\tvar obj = {};\n\ttry {\n\t\torigDefineProperty(obj, 'x', { enumerable: false, value: obj });\n\t\t// eslint-disable-next-line no-unused-vars, no-restricted-syntax\n\t\tfor (var _ in obj) { // jscs:ignore disallowUnusedVariables\n\t\t\treturn false;\n\t\t}\n\t\treturn obj.x === obj;\n\t} catch (e) { /* this is IE 8. */\n\t\treturn false;\n\t}\n};\nvar supportsDescriptors = origDefineProperty && arePropertyDescriptorsSupported();\n\nvar defineProperty = function (object, name, value, predicate) {\n\tif (name in object && (!isFunction(predicate) || !predicate())) {\n\t\treturn;\n\t}\n\tif (supportsDescriptors) {\n\t\torigDefineProperty(object, name, {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: false,\n\t\t\tvalue: value,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\tobject[name] = value;\n\t}\n};\n\nvar defineProperties = function (object, map) {\n\tvar predicates = arguments.length > 2 ? arguments[2] : {};\n\tvar props = keys(map);\n\tif (hasSymbols) {\n\t\tprops = concat.call(props, Object.getOwnPropertySymbols(map));\n\t}\n\tfor (var i = 0; i < props.length; i += 1) {\n\t\tdefineProperty(object, props[i], map[props[i]], predicates[props[i]]);\n\t}\n};\n\ndefineProperties.supportsDescriptors = !!supportsDescriptors;\n\nmodule.exports = defineProperties;\n","'use strict';\n\nvar toObject = Object;\nvar TypeErr = TypeError;\n\nmodule.exports = function flags() {\n\tif (this != null && this !== toObject(this)) {\n\t\tthrow new TypeErr('RegExp.prototype.flags getter called on non-object');\n\t}\n\tvar result = '';\n\tif (this.global) {\n\t\tresult += 'g';\n\t}\n\tif (this.ignoreCase) {\n\t\tresult += 'i';\n\t}\n\tif (this.multiline) {\n\t\tresult += 'm';\n\t}\n\tif (this.dotAll) {\n\t\tresult += 's';\n\t}\n\tif (this.unicode) {\n\t\tresult += 'u';\n\t}\n\tif (this.sticky) {\n\t\tresult += 'y';\n\t}\n\treturn result;\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nvar supportsDescriptors = require('define-properties').supportsDescriptors;\nvar gOPD = Object.getOwnPropertyDescriptor;\nvar TypeErr = TypeError;\n\nmodule.exports = function getPolyfill() {\n\tif (!supportsDescriptors) {\n\t\tthrow new TypeErr('RegExp.prototype.flags requires a true ES5 environment that supports property descriptors');\n\t}\n\tif (/a/mig.flags === 'gim') {\n\t\tvar descriptor = gOPD(RegExp.prototype, 'flags');\n\t\tif (descriptor && typeof descriptor.get === 'function' && typeof (/a/).dotAll === 'boolean') {\n\t\t\treturn descriptor.get;\n\t\t}\n\t}\n\treturn implementation;\n};\n","'use strict';\n\nvar supportsDescriptors = require('define-properties').supportsDescriptors;\nvar getPolyfill = require('./polyfill');\nvar gOPD = Object.getOwnPropertyDescriptor;\nvar defineProperty = Object.defineProperty;\nvar TypeErr = TypeError;\nvar getProto = Object.getPrototypeOf;\nvar regex = /a/;\n\nmodule.exports = function shimFlags() {\n\tif (!supportsDescriptors || !getProto) {\n\t\tthrow new TypeErr('RegExp.prototype.flags requires a true ES5 environment that supports property descriptors');\n\t}\n\tvar polyfill = getPolyfill();\n\tvar proto = getProto(regex);\n\tvar descriptor = gOPD(proto, 'flags');\n\tif (!descriptor || descriptor.get !== polyfill) {\n\t\tdefineProperty(proto, 'flags', {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: false,\n\t\t\tget: polyfill\n\t\t});\n\t}\n\treturn polyfill;\n};\n","'use strict';\n\nvar define = require('define-properties');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar flagsBound = Function.call.bind(implementation);\n\ndefine(flagsBound, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = flagsBound;\n","'use strict';\n\nvar getDay = Date.prototype.getDay;\nvar tryDateObject = function tryDateObject(value) {\n\ttry {\n\t\tgetDay.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n\nvar toStr = Object.prototype.toString;\nvar dateClass = '[object Date]';\nvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\n\nmodule.exports = function isDateObject(value) {\n\tif (typeof value !== 'object' || value === null) { return false; }\n\treturn hasToStringTag ? tryDateObject(value) : toStr.call(value) === dateClass;\n};\n","var objectKeys = require('object-keys');\nvar isArguments = require('is-arguments');\nvar is = require('object-is');\nvar isRegex = require('is-regex');\nvar flags = require('regexp.prototype.flags');\nvar isDate = require('is-date-object');\n\nvar getTime = Date.prototype.getTime;\n\nfunction deepEqual(actual, expected, options) {\n  var opts = options || {};\n\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (opts.strict ? is(actual, expected) : actual === expected) {\n    return true;\n  }\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object', equivalence is determined by ==.\n  if (!actual || !expected || (typeof actual !== 'object' && typeof expected !== 'object')) {\n    return opts.strict ? is(actual, expected) : actual == expected;\n  }\n\n  /*\n   * 7.4. For all other Object pairs, including Array objects, equivalence is\n   * determined by having the same number of owned properties (as verified\n   * with Object.prototype.hasOwnProperty.call), the same set of keys\n   * (although not necessarily the same order), equivalent values for every\n   * corresponding key, and an identical 'prototype' property. Note: this\n   * accounts for both named and indexed properties on Arrays.\n   */\n  // eslint-disable-next-line no-use-before-define\n  return objEquiv(actual, expected, opts);\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer(x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') {\n    return false;\n  }\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') {\n    return false;\n  }\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  /* eslint max-statements: [2, 50] */\n  var i, key;\n  if (typeof a !== typeof b) { return false; }\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b)) { return false; }\n\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) { return false; }\n\n  if (isArguments(a) !== isArguments(b)) { return false; }\n\n  var aIsRegex = isRegex(a);\n  var bIsRegex = isRegex(b);\n  if (aIsRegex !== bIsRegex) { return false; }\n  if (aIsRegex || bIsRegex) {\n    return a.source === b.source && flags(a) === flags(b);\n  }\n\n  if (isDate(a) && isDate(b)) {\n    return getTime.call(a) === getTime.call(b);\n  }\n\n  var aIsBuffer = isBuffer(a);\n  var bIsBuffer = isBuffer(b);\n  if (aIsBuffer !== bIsBuffer) { return false; }\n  if (aIsBuffer || bIsBuffer) { // && would work too, because both are true or both false here\n    if (a.length !== b.length) { return false; }\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) { return false; }\n    }\n    return true;\n  }\n\n  if (typeof a !== typeof b) { return false; }\n\n  try {\n    var ka = objectKeys(a);\n    var kb = objectKeys(b);\n  } catch (e) { // happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates hasOwnProperty)\n  if (ka.length !== kb.length) { return false; }\n\n  // the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  // ~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i]) { return false; }\n  }\n  // equivalent values for every corresponding key, and ~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) { return false; }\n  }\n\n  return true;\n}\n\nmodule.exports = deepEqual;\n","/*\n * Date Format 1.2.3\n * (c) 2007-2009 Steven Levithan <stevenlevithan.com>\n * MIT license\n *\n * Includes enhancements by Scott Trenda <scott.trenda.net>\n * and Kris Kowal <cixar.com/~kris.kowal/>\n *\n * Accepts a date, a mask, or a date and a mask.\n * Returns a formatted version of the given date.\n * The date defaults to the current date/time.\n * The mask defaults to dateFormat.masks.default.\n */\n\n(function(global) {\n  'use strict';\n\n  var dateFormat = (function() {\n      var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZWN]|\"[^\"]*\"|'[^']*'/g;\n      var timezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g;\n      var timezoneClip = /[^-+\\dA-Z]/g;\n  \n      // Regexes and supporting functions are cached through closure\n      return function (date, mask, utc, gmt) {\n  \n        // You can't provide utc if you skip other args (use the 'UTC:' mask prefix)\n        if (arguments.length === 1 && kindOf(date) === 'string' && !/\\d/.test(date)) {\n          mask = date;\n          date = undefined;\n        }\n  \n        date = date || new Date;\n  \n        if(!(date instanceof Date)) {\n          date = new Date(date);\n        }\n  \n        if (isNaN(date)) {\n          throw TypeError('Invalid date');\n        }\n  \n        mask = String(dateFormat.masks[mask] || mask || dateFormat.masks['default']);\n  \n        // Allow setting the utc/gmt argument via the mask\n        var maskSlice = mask.slice(0, 4);\n        if (maskSlice === 'UTC:' || maskSlice === 'GMT:') {\n          mask = mask.slice(4);\n          utc = true;\n          if (maskSlice === 'GMT:') {\n            gmt = true;\n          }\n        }\n  \n        var _ = utc ? 'getUTC' : 'get';\n        var d = date[_ + 'Date']();\n        var D = date[_ + 'Day']();\n        var m = date[_ + 'Month']();\n        var y = date[_ + 'FullYear']();\n        var H = date[_ + 'Hours']();\n        var M = date[_ + 'Minutes']();\n        var s = date[_ + 'Seconds']();\n        var L = date[_ + 'Milliseconds']();\n        var o = utc ? 0 : date.getTimezoneOffset();\n        var W = getWeek(date);\n        var N = getDayOfWeek(date);\n        var flags = {\n          d:    d,\n          dd:   pad(d),\n          ddd:  dateFormat.i18n.dayNames[D],\n          dddd: dateFormat.i18n.dayNames[D + 7],\n          m:    m + 1,\n          mm:   pad(m + 1),\n          mmm:  dateFormat.i18n.monthNames[m],\n          mmmm: dateFormat.i18n.monthNames[m + 12],\n          yy:   String(y).slice(2),\n          yyyy: y,\n          h:    H % 12 || 12,\n          hh:   pad(H % 12 || 12),\n          H:    H,\n          HH:   pad(H),\n          M:    M,\n          MM:   pad(M),\n          s:    s,\n          ss:   pad(s),\n          l:    pad(L, 3),\n          L:    pad(Math.round(L / 10)),\n          t:    H < 12 ? dateFormat.i18n.timeNames[0] : dateFormat.i18n.timeNames[1],\n          tt:   H < 12 ? dateFormat.i18n.timeNames[2] : dateFormat.i18n.timeNames[3],\n          T:    H < 12 ? dateFormat.i18n.timeNames[4] : dateFormat.i18n.timeNames[5],\n          TT:   H < 12 ? dateFormat.i18n.timeNames[6] : dateFormat.i18n.timeNames[7],\n          Z:    gmt ? 'GMT' : utc ? 'UTC' : (String(date).match(timezone) || ['']).pop().replace(timezoneClip, ''),\n          o:    (o > 0 ? '-' : '+') + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),\n          S:    ['th', 'st', 'nd', 'rd'][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10],\n          W:    W,\n          N:    N\n        };\n  \n        return mask.replace(token, function (match) {\n          if (match in flags) {\n            return flags[match];\n          }\n          return match.slice(1, match.length - 1);\n        });\n      };\n    })();\n\n  dateFormat.masks = {\n    'default':               'ddd mmm dd yyyy HH:MM:ss',\n    'shortDate':             'm/d/yy',\n    'mediumDate':            'mmm d, yyyy',\n    'longDate':              'mmmm d, yyyy',\n    'fullDate':              'dddd, mmmm d, yyyy',\n    'shortTime':             'h:MM TT',\n    'mediumTime':            'h:MM:ss TT',\n    'longTime':              'h:MM:ss TT Z',\n    'isoDate':               'yyyy-mm-dd',\n    'isoTime':               'HH:MM:ss',\n    'isoDateTime':           'yyyy-mm-dd\\'T\\'HH:MM:sso',\n    'isoUtcDateTime':        'UTC:yyyy-mm-dd\\'T\\'HH:MM:ss\\'Z\\'',\n    'expiresHeaderFormat':   'ddd, dd mmm yyyy HH:MM:ss Z'\n  };\n\n  // Internationalization strings\n  dateFormat.i18n = {\n    dayNames: [\n      'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat',\n      'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\n    ],\n    monthNames: [\n      'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec',\n      'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\n    ],\n    timeNames: [\n      'a', 'p', 'am', 'pm', 'A', 'P', 'AM', 'PM'\n    ]\n  };\n\nfunction pad(val, len) {\n  val = String(val);\n  len = len || 2;\n  while (val.length < len) {\n    val = '0' + val;\n  }\n  return val;\n}\n\n/**\n * Get the ISO 8601 week number\n * Based on comments from\n * http://techblog.procurios.nl/k/n618/news/view/33796/14863/Calculate-ISO-8601-week-and-year-in-javascript.html\n *\n * @param  {Object} `date`\n * @return {Number}\n */\nfunction getWeek(date) {\n  // Remove time components of date\n  var targetThursday = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n\n  // Change date to Thursday same week\n  targetThursday.setDate(targetThursday.getDate() - ((targetThursday.getDay() + 6) % 7) + 3);\n\n  // Take January 4th as it is always in week 1 (see ISO 8601)\n  var firstThursday = new Date(targetThursday.getFullYear(), 0, 4);\n\n  // Change date to Thursday same week\n  firstThursday.setDate(firstThursday.getDate() - ((firstThursday.getDay() + 6) % 7) + 3);\n\n  // Check if daylight-saving-time-switch occurred and correct for it\n  var ds = targetThursday.getTimezoneOffset() - firstThursday.getTimezoneOffset();\n  targetThursday.setHours(targetThursday.getHours() - ds);\n\n  // Number of weeks between target Thursday and first Thursday\n  var weekDiff = (targetThursday - firstThursday) / (86400000*7);\n  return 1 + Math.floor(weekDiff);\n}\n\n/**\n * Get ISO-8601 numeric representation of the day of the week\n * 1 (for Monday) through 7 (for Sunday)\n * \n * @param  {Object} `date`\n * @return {Number}\n */\nfunction getDayOfWeek(date) {\n  var dow = date.getDay();\n  if(dow === 0) {\n    dow = 7;\n  }\n  return dow;\n}\n\n/**\n * kind-of shortcut\n * @param  {*} val\n * @return {String}\n */\nfunction kindOf(val) {\n  if (val === null) {\n    return 'null';\n  }\n\n  if (val === undefined) {\n    return 'undefined';\n  }\n\n  if (typeof val !== 'object') {\n    return typeof val;\n  }\n\n  if (Array.isArray(val)) {\n    return 'array';\n  }\n\n  return {}.toString.call(val)\n    .slice(8, -1).toLowerCase();\n};\n\n\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return dateFormat;\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = dateFormat;\n  } else {\n    global.dateFormat = dateFormat;\n  }\n})(this);\n","/*!\n * repeat-string <https://github.com/jonschlinkert/repeat-string>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\n/**\n * Results cache\n */\n\nvar res = '';\nvar cache;\n\n/**\n * Expose `repeat`\n */\n\nmodule.exports = repeat;\n\n/**\n * Repeat the given `string` the specified `number`\n * of times.\n *\n * **Example:**\n *\n * ```js\n * var repeat = require('repeat-string');\n * repeat('A', 5);\n * //=> AAAAA\n * ```\n *\n * @param {String} `string` The string to repeat\n * @param {Number} `number` The number of times to repeat the string\n * @return {String} Repeated string\n * @api public\n */\n\nfunction repeat(str, num) {\n  if (typeof str !== 'string') {\n    throw new TypeError('expected a string');\n  }\n\n  // cover common, quick use cases\n  if (num === 1) return str;\n  if (num === 2) return str + str;\n\n  var max = str.length * num;\n  if (cache !== str || typeof cache === 'undefined') {\n    cache = str;\n    res = '';\n  } else if (res.length >= max) {\n    return res.substr(0, max);\n  }\n\n  while (max > res.length && num > 1) {\n    if (num & 1) {\n      res += str;\n    }\n\n    num >>= 1;\n    str += str;\n  }\n\n  res += str;\n  res = res.substr(0, max);\n  return res;\n}\n","/*!\n * pad-left <https://github.com/jonschlinkert/pad-left>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT license.\n */\n\n'use strict';\n\nvar repeat = require('repeat-string');\n\nmodule.exports = function padLeft(str, num, ch) {\n  str = str.toString();\n\n  if (typeof num === 'undefined') {\n    return str;\n  }\n\n  if (ch === 0) {\n    ch = '0';\n  } else if (ch) {\n    ch = ch.toString();\n  } else {\n    ch = ' ';\n  }\n\n  return repeat(ch, num - str.length) + str;\n};\n","import dateformat from 'dateformat';\nimport assign from 'object-assign';\nimport padLeft from 'pad-left';\nimport { getClientAPI } from './util';\n\nconst noop = () => {};\nlet link;\nlet defaultExts = { extension: '', prefix: '', suffix: '' };\n\n// Alternative solution for saving files,\n// a bit slower and does not work in Safari\n// function fetchBlobFromDataURL (dataURL) {\n//   return window.fetch(dataURL).then(res => res.blob());\n// }\n\nconst supportedEncodings = [\n  'image/png',\n  'image/jpeg',\n  'image/webp'\n];\n\nfunction stream (isStart, opts = {}) {\n  return new Promise((resolve, reject) => {\n    opts = assign({}, defaultExts, opts);\n    const filename = resolveFilename(Object.assign({}, opts, {\n      extension: '',\n      frame: undefined\n    }));\n    const func = isStart ? 'streamStart' : 'streamEnd';\n    const client = getClientAPI();\n    if (client && client.output && typeof client[func] === 'function') {\n      return client[func](assign({}, opts, { filename }))\n        .then(ev => resolve(ev));\n    } else {\n      return resolve({ filename, client: false });\n    }\n  });\n}\n\nexport function streamStart (opts = {}) {\n  return stream(true, opts);\n}\n\nexport function streamEnd (opts = {}) {\n  return stream(false, opts);\n}\n\nexport function exportCanvas (canvas, opt = {}) {\n  const encoding = opt.encoding || 'image/png';\n  if (!supportedEncodings.includes(encoding)) throw new Error(`Invalid canvas encoding ${encoding}`);\n  let extension = (encoding.split('/')[1] || '').replace(/jpeg/i, 'jpg');\n  if (extension) extension = `.${extension}`.toLowerCase();\n  return {\n    extension,\n    type: encoding,\n    dataURL: canvas.toDataURL(encoding, opt.encodingQuality)\n  };\n}\n\nfunction createBlobFromDataURL (dataURL) {\n  return new Promise((resolve) => {\n    const splitIndex = dataURL.indexOf(',');\n    if (splitIndex === -1) {\n      resolve(new window.Blob());\n      return;\n    }\n    const base64 = dataURL.slice(splitIndex + 1);\n    const byteString = window.atob(base64);\n    const type = dataURL.slice(0, splitIndex);\n    const mimeMatch = /data:([^;]+)/.exec(type);\n    const mime = (mimeMatch ? mimeMatch[1] : '') || undefined;\n    const ab = new ArrayBuffer(byteString.length);\n    const ia = new Uint8Array(ab);\n    for (var i = 0; i < byteString.length; i++) {\n      ia[i] = byteString.charCodeAt(i);\n    }\n    resolve(new window.Blob([ ab ], { type: mime }));\n  });\n}\n\nexport function saveDataURL (dataURL, opts = {}) {\n  return createBlobFromDataURL(dataURL)\n    .then(blob => saveBlob(blob, opts));\n}\n\nexport function saveBlob (blob, opts = {}) {\n  return new Promise(resolve => {\n    opts = assign({}, defaultExts, opts);\n    const filename = opts.filename;\n\n    const client = getClientAPI();\n    if (client && typeof client.saveBlob === 'function' && client.output) {\n      // native saving using a CLI tool\n      return client.saveBlob(blob, assign({}, opts, { filename }))\n        .then(ev => resolve(ev));\n    } else {\n      // force download\n      if (!link) {\n        link = document.createElement('a');\n        link.style.visibility = 'hidden';\n        link.target = '_blank';\n      }\n      link.download = filename;\n      link.href = window.URL.createObjectURL(blob);\n      document.body.appendChild(link);\n      link.onclick = () => {\n        link.onclick = noop;\n        setTimeout(() => {\n          window.URL.revokeObjectURL(blob);\n          if (link.parentElement) link.parentElement.removeChild(link);\n          link.removeAttribute('href');\n          resolve({ filename, client: false });\n        });\n      };\n      link.click();\n    }\n  });\n}\n\nexport function saveFile (data, opts = {}) {\n  const parts = Array.isArray(data) ? data : [ data ];\n  const blob = new window.Blob(parts, { type: opts.type || '' });\n  return saveBlob(blob, opts);\n}\n\nexport function getTimeStamp () {\n  const dateFormatStr = `yyyy.mm.dd-HH.MM.ss`;\n  return dateformat(new Date(), dateFormatStr);\n}\n\nexport function getDefaultFile (prefix = '', suffix = '', ext) {\n  // const dateFormatStr = `yyyy.mm.dd-HH.MM.ss`;\n  const dateFormatStr = `yyyy-mm-dd 'at' h.MM.ss TT`;\n  return `${prefix}${dateformat(new Date(), dateFormatStr)}${suffix}${ext}`;\n}\n\nexport function resolveFilename (opt = {}) {\n  opt = assign({}, opt);\n\n  // Custom filename function\n  if (typeof opt.file === 'function') {\n    return opt.file(opt);\n  } else if (opt.file) {\n    return opt.file;\n  }\n\n  let frame = null;\n  let extension = '';\n  if (typeof opt.extension === 'string') extension = opt.extension;\n\n  if (typeof opt.frame === 'number') {\n    let totalFrames;\n    if (typeof opt.totalFrames === 'number') {\n      totalFrames = opt.totalFrames;\n    } else {\n      totalFrames = Math.max(1000, opt.frame);\n    }\n    frame = padLeft(String(opt.frame), String(totalFrames).length, '0');\n  }\n\n  const layerStr = isFinite(opt.totalLayers) && isFinite(opt.layer) && opt.totalLayers > 1 ? `${opt.layer}` : '';\n  if (frame != null) {\n    return [ layerStr, frame ].filter(Boolean).join('-') + extension;\n  } else {\n    const defaultFileName = opt.timeStamp;\n    return [ opt.prefix, opt.name || defaultFileName, layerStr, opt.hash, opt.suffix ].filter(Boolean).join('-') + extension;\n  }\n}\n","// Handle some common typos\nconst commonTypos = {\n  dimension: 'dimensions',\n  animated: 'animate',\n  animating: 'animate',\n  unit: 'units',\n  P5: 'p5',\n  pixellated: 'pixelated',\n  looping: 'loop',\n  pixelPerInch: 'pixels'\n};\n\n// Handle all other typos\nconst allKeys = [\n  'dimensions', 'units', 'pixelsPerInch', 'orientation',\n  'scaleToFit', 'scaleToView', 'bleed', 'pixelRatio',\n  'exportPixelRatio', 'maxPixelRatio', 'scaleContext',\n  'resizeCanvas', 'styleCanvas', 'canvas', 'context', 'attributes',\n  'parent', 'file', 'name', 'prefix', 'suffix', 'animate', 'playing',\n  'loop', 'duration', 'totalFrames', 'fps', 'playbackRate', 'timeScale',\n  'frame', 'time', 'flush', 'pixelated', 'hotkeys', 'p5', 'id',\n  'scaleToFitPadding', 'data', 'params', 'encoding', 'encodingQuality'\n];\n\n// This is fairly opinionated and forces users to use the 'data' parameter\n// if they want to pass along non-setting objects...\nexport const checkSettings = (settings) => {\n  const keys = Object.keys(settings);\n  keys.forEach(key => {\n    if (key in commonTypos) {\n      const actual = commonTypos[key];\n      console.warn(`[canvas-sketch] Could not recognize the setting \"${key}\", did you mean \"${actual}\"?`);\n    } else if (!allKeys.includes(key)) {\n      console.warn(`[canvas-sketch] Could not recognize the setting \"${key}\"`);\n    }\n  });\n};\n","import { getClientAPI } from '../util';\n\nexport default function (opt = {}) {\n  const handler = ev => {\n    if (!opt.enabled()) return;\n\n    const client = getClientAPI();\n    if (ev.keyCode === 83 && !ev.altKey && (ev.metaKey || ev.ctrlKey)) {\n      // Cmd + S\n      ev.preventDefault();\n      opt.save(ev);\n    } else if (ev.keyCode === 32) {\n      // Space\n      // TODO: what to do with this? keep it, or remove it?\n      opt.togglePlay(ev);\n    } else if (client && !ev.altKey && ev.keyCode === 75 && (ev.metaKey || ev.ctrlKey)) {\n      // Cmd + K, only when canvas-sketch-cli is used\n      ev.preventDefault();\n      opt.commit(ev);\n    }\n  };\n\n  const attach = () => {\n    window.addEventListener('keydown', handler);\n  };\n\n  const detach = () => {\n    window.removeEventListener('keydown', handler);\n  };\n\n  return {\n    attach,\n    detach\n  };\n}\n","const defaultUnits = 'mm';\n\nconst data = [\n  // Common Paper Sizes\n  // (Mostly North-American based)\n  [ 'postcard', 101.6, 152.4 ],\n  [ 'poster-small', 280, 430 ],\n  [ 'poster', 460, 610 ],\n  [ 'poster-large', 610, 910 ],\n  [ 'business-card', 50.8, 88.9 ],\n\n  // Photographic Print Paper Sizes\n  [ '2r', 64, 89 ],\n  [ '3r', 89, 127 ],\n  [ '4r', 102, 152 ],\n  [ '5r', 127, 178 ], // 5″x7″\n  [ '6r', 152, 203 ], // 6″x8″\n  [ '8r', 203, 254 ], // 8″x10″\n  [ '10r', 254, 305 ], // 10″x12″\n  [ '11r', 279, 356 ], // 11″x14″\n  [ '12r', 305, 381 ],\n\n  // Standard Paper Sizes\n  [ 'a0', 841, 1189 ],\n  [ 'a1', 594, 841 ],\n  [ 'a2', 420, 594 ],\n  [ 'a3', 297, 420 ],\n  [ 'a4', 210, 297 ],\n  [ 'a5', 148, 210 ],\n  [ 'a6', 105, 148 ],\n  [ 'a7', 74, 105 ],\n  [ 'a8', 52, 74 ],\n  [ 'a9', 37, 52 ],\n  [ 'a10', 26, 37 ],\n  [ '2a0', 1189, 1682 ],\n  [ '4a0', 1682, 2378 ],\n  [ 'b0', 1000, 1414 ],\n  [ 'b1', 707, 1000 ],\n  [ 'b1+', 720, 1020 ],\n  [ 'b2', 500, 707 ],\n  [ 'b2+', 520, 720 ],\n  [ 'b3', 353, 500 ],\n  [ 'b4', 250, 353 ],\n  [ 'b5', 176, 250 ],\n  [ 'b6', 125, 176 ],\n  [ 'b7', 88, 125 ],\n  [ 'b8', 62, 88 ],\n  [ 'b9', 44, 62 ],\n  [ 'b10', 31, 44 ],\n  [ 'b11', 22, 32 ],\n  [ 'b12', 16, 22 ],\n  [ 'c0', 917, 1297 ],\n  [ 'c1', 648, 917 ],\n  [ 'c2', 458, 648 ],\n  [ 'c3', 324, 458 ],\n  [ 'c4', 229, 324 ],\n  [ 'c5', 162, 229 ],\n  [ 'c6', 114, 162 ],\n  [ 'c7', 81, 114 ],\n  [ 'c8', 57, 81 ],\n  [ 'c9', 40, 57 ],\n  [ 'c10', 28, 40 ],\n  [ 'c11', 22, 32 ],\n  [ 'c12', 16, 22 ],\n\n  // Use inches for North American sizes,\n  // as it produces less float precision errors\n  [ 'half-letter', 5.5, 8.5, 'in' ],\n  [ 'letter', 8.5, 11, 'in' ],\n  [ 'legal', 8.5, 14, 'in' ],\n  [ 'junior-legal', 5, 8, 'in' ],\n  [ 'ledger', 11, 17, 'in' ],\n  [ 'tabloid', 11, 17, 'in' ],\n  [ 'ansi-a', 8.5, 11.0, 'in' ],\n  [ 'ansi-b', 11.0, 17.0, 'in' ],\n  [ 'ansi-c', 17.0, 22.0, 'in' ],\n  [ 'ansi-d', 22.0, 34.0, 'in' ],\n  [ 'ansi-e', 34.0, 44.0, 'in' ],\n  [ 'arch-a', 9, 12, 'in' ],\n  [ 'arch-b', 12, 18, 'in' ],\n  [ 'arch-c', 18, 24, 'in' ],\n  [ 'arch-d', 24, 36, 'in' ],\n  [ 'arch-e', 36, 48, 'in' ],\n  [ 'arch-e1', 30, 42, 'in' ],\n  [ 'arch-e2', 26, 38, 'in' ],\n  [ 'arch-e3', 27, 39, 'in' ]\n];\n\nexport default data.reduce((dict, preset) => {\n  const item = {\n    units: preset[3] || defaultUnits,\n    dimensions: [ preset[1], preset[2] ]\n  };\n  dict[preset[0]] = item;\n  dict[preset[0].replace(/-/g, ' ')] = item;\n  return dict;\n}, {});\n","module.exports = function () {\n    for (var i = 0; i < arguments.length; i++) {\n        if (arguments[i] !== undefined) return arguments[i];\n    }\n};\n","var defined = require('defined');\nvar units = [ 'mm', 'cm', 'm', 'pc', 'pt', 'in', 'ft', 'px' ];\n\nvar conversions = {\n  // metric\n  m: {\n    system: 'metric',\n    factor: 1\n  },\n  cm: {\n    system: 'metric',\n    factor: 1 / 100\n  },\n  mm: {\n    system: 'metric',\n    factor: 1 / 1000\n  },\n  // imperial\n  pt: {\n    system: 'imperial',\n    factor: 1 / 72\n  },\n  pc: {\n    system: 'imperial',\n    factor: 1 / 6\n  },\n  in: {\n    system: 'imperial',\n    factor: 1\n  },\n  ft: {\n    system: 'imperial',\n    factor: 12\n  }\n};\n\nconst anchors = {\n  metric: {\n    unit: 'm',\n    ratio: 1 / 0.0254\n  },\n  imperial: {\n    unit: 'in',\n    ratio: 0.0254\n  }\n};\n\nfunction round (value, decimals) {\n  return Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);\n}\n\nfunction convertDistance (value, fromUnit, toUnit, opts) {\n  if (typeof value !== 'number' || !isFinite(value)) throw new Error('Value must be a finite number');\n  if (!fromUnit || !toUnit) throw new Error('Must specify from and to units');\n\n  opts = opts || {};\n  var pixelsPerInch = defined(opts.pixelsPerInch, 96);\n  var precision = opts.precision;\n  var roundPixel = opts.roundPixel !== false;\n\n  fromUnit = fromUnit.toLowerCase();\n  toUnit = toUnit.toLowerCase();\n\n  if (units.indexOf(fromUnit) === -1) throw new Error('Invalid from unit \"' + fromUnit + '\", must be one of: ' + units.join(', '));\n  if (units.indexOf(toUnit) === -1) throw new Error('Invalid from unit \"' + toUnit + '\", must be one of: ' + units.join(', '));\n\n  if (fromUnit === toUnit) {\n    // We don't need to convert from A to B since they are the same already\n    return value;\n  }\n\n  var toFactor = 1;\n  var fromFactor = 1;\n  var isToPixel = false;\n\n  if (fromUnit === 'px') {\n    fromFactor = 1 / pixelsPerInch;\n    fromUnit = 'in';\n  }\n  if (toUnit === 'px') {\n    isToPixel = true;\n    toFactor = pixelsPerInch;\n    toUnit = 'in';\n  }\n\n  var fromUnitData = conversions[fromUnit];\n  var toUnitData = conversions[toUnit];\n\n  // source to anchor inside source's system\n  var anchor = value * fromUnitData.factor * fromFactor;\n\n  // if systems differ, convert one to another\n  if (fromUnitData.system !== toUnitData.system) {\n    // regular 'm' to 'in' and so forth\n    anchor *= anchors[fromUnitData.system].ratio;\n  }\n\n  var result = anchor / toUnitData.factor * toFactor;\n  if (isToPixel && roundPixel) {\n    result = Math.round(result);\n  } else if (typeof precision === 'number' && isFinite(precision)) {\n    result = round(result, precision);\n  }\n  return result;\n}\n\nmodule.exports = convertDistance;\nmodule.exports.units = units;\n","import paperSizes from './paper-sizes';\nimport convertLength from 'convert-length';\n\nexport function getDimensionsFromPreset (dimensions, unitsTo = 'px', pixelsPerInch = 72) {\n  if (typeof dimensions === 'string') {\n    const key = dimensions.toLowerCase();\n    if (!(key in paperSizes)) {\n      throw new Error(`The dimension preset \"${dimensions}\" is not supported or could not be found; try using a4, a3, postcard, letter, etc.`)\n    }\n    const preset = paperSizes[key];\n    return preset.dimensions.map(d => {\n      return convertDistance(d, preset.units, unitsTo, pixelsPerInch);\n    });\n  } else {\n    return dimensions;\n  }\n}\n\nexport function convertDistance (dimension, unitsFrom = 'px', unitsTo = 'px', pixelsPerInch = 72) {\n  return convertLength(dimension, unitsFrom, unitsTo, {\n    pixelsPerInch,\n    precision: 4,\n    roundPixel: true\n  });\n}\n","import { getDimensionsFromPreset, convertDistance } from '../distances';\nimport { isBrowser, defined } from '../util';\n\nfunction checkIfHasDimensions (settings) {\n  if (!settings.dimensions) return false;\n  if (typeof settings.dimensions === 'string') return true;\n  if (Array.isArray(settings.dimensions) && settings.dimensions.length >= 2) return true;\n  return false;\n}\n\nfunction getParentSize (props, settings) {\n  // When no { dimension } is passed in node, we default to HTML canvas size\n  if (!isBrowser()) {\n    return [ 300, 150 ];\n  }\n\n  let element = settings.parent || window;\n\n  if (element === window ||\n      element === document ||\n      element === document.body) {\n    return [ window.innerWidth, window.innerHeight ];\n  } else {\n    const { width, height } = element.getBoundingClientRect();\n    return [ width, height ];\n  }\n}\n\nexport default function resizeCanvas (props, settings) {\n  let width, height;\n  let styleWidth, styleHeight;\n  let canvasWidth, canvasHeight;\n\n  const browser = isBrowser();\n  const dimensions = settings.dimensions;\n  const hasDimensions = checkIfHasDimensions(settings);\n  const exporting = props.exporting;\n  let scaleToFit = hasDimensions ? settings.scaleToFit !== false : false;\n  let scaleToView = (!exporting && hasDimensions) ? settings.scaleToView : true;\n  // in node, cancel both of these options\n  if (!browser) scaleToFit = scaleToView = false;\n  const units = settings.units;\n  const pixelsPerInch = (typeof settings.pixelsPerInch === 'number' && isFinite(settings.pixelsPerInch)) ? settings.pixelsPerInch : 72;\n  const bleed = defined(settings.bleed, 0);\n\n  const devicePixelRatio = browser ? window.devicePixelRatio : 1;\n  const basePixelRatio = scaleToView ? devicePixelRatio : 1;\n\n  let pixelRatio, exportPixelRatio;\n\n  // If a pixel ratio is specified, we will use it.\n  // Otherwise:\n  //  -> If dimension is specified, use base ratio (i.e. size for export)\n  //  -> If no dimension is specified, use device ratio (i.e. size for screen)\n  if (typeof settings.pixelRatio === 'number' && isFinite(settings.pixelRatio)) {\n    // When { pixelRatio } is specified, it's also used as default exportPixelRatio.\n    pixelRatio = settings.pixelRatio;\n    exportPixelRatio = defined(settings.exportPixelRatio, pixelRatio);\n  } else {\n    if (hasDimensions) {\n      // When a dimension is specified, use the base ratio rather than screen ratio\n      pixelRatio = basePixelRatio;\n      // Default to a pixel ratio of 1 so that you end up with the same dimension\n      // you specified, i.e. [ 500, 500 ] is exported as 500x500 px\n      exportPixelRatio = defined(settings.exportPixelRatio, 1);\n    } else {\n      // No dimension is specified, assume full-screen retina sizing\n      pixelRatio = devicePixelRatio;\n      // Default to screen pixel ratio, so that it's like taking a device screenshot\n      exportPixelRatio = defined(settings.exportPixelRatio, pixelRatio);\n    }\n  }\n\n  // Clamp pixel ratio\n  if (typeof settings.maxPixelRatio === 'number' && isFinite(settings.maxPixelRatio)) {\n    pixelRatio = Math.min(settings.maxPixelRatio, pixelRatio);\n  }\n\n  // Handle export pixel ratio\n  if (exporting) {\n    pixelRatio = exportPixelRatio;\n  }\n\n  // parentWidth = typeof parentWidth === 'undefined' ? defaultNodeSize[0] : parentWidth;\n  // parentHeight = typeof parentHeight === 'undefined' ? defaultNodeSize[1] : parentHeight;\n\n  let [ parentWidth, parentHeight ] = getParentSize(props, settings);\n  let trimWidth, trimHeight;\n\n  // You can specify a dimensions in pixels or cm/m/in/etc\n  if (hasDimensions) {\n    const result = getDimensionsFromPreset(dimensions, units, pixelsPerInch);\n    const highest = Math.max(result[0], result[1]);\n    const lowest = Math.min(result[0], result[1]);\n    if (settings.orientation) {\n      const landscape = settings.orientation === 'landscape';\n      width = landscape ? highest : lowest;\n      height = landscape ? lowest : highest;\n    } else {\n      width = result[0];\n      height = result[1];\n    }\n\n    trimWidth = width;\n    trimHeight = height;\n\n    // Apply bleed which is assumed to be in the same units\n    width += bleed * 2;\n    height += bleed * 2;\n  } else {\n    width = parentWidth;\n    height = parentHeight;\n    trimWidth = width;\n    trimHeight = height;\n  }\n\n  // Real size in pixels after PPI is taken into account\n  let realWidth = width;\n  let realHeight = height;\n  if (hasDimensions && units) {\n    // Convert to digital/pixel units if necessary\n    realWidth = convertDistance(width, units, 'px', pixelsPerInch);\n    realHeight = convertDistance(height, units, 'px', pixelsPerInch);\n  }\n\n  // How big to set the 'view' of the canvas in the browser (i.e. style)\n  styleWidth = Math.round(realWidth);\n  styleHeight = Math.round(realHeight);\n\n  // If we wish to scale the view to the browser window\n  if (scaleToFit && !exporting && hasDimensions) {\n    const aspect = width / height;\n    const windowAspect = parentWidth / parentHeight;\n    const scaleToFitPadding = defined(settings.scaleToFitPadding, 40);\n    const maxWidth = Math.round(parentWidth - scaleToFitPadding * 2);\n    const maxHeight = Math.round(parentHeight - scaleToFitPadding * 2);\n    if (styleWidth > maxWidth || styleHeight > maxHeight) {\n      if (windowAspect > aspect) {\n        styleHeight = maxHeight;\n        styleWidth = Math.round(styleHeight * aspect);\n      } else {\n        styleWidth = maxWidth;\n        styleHeight = Math.round(styleWidth / aspect);\n      }\n    }\n  }\n\n  canvasWidth = scaleToView ? Math.round(pixelRatio * styleWidth) : Math.round(pixelRatio * realWidth);\n  canvasHeight = scaleToView ? Math.round(pixelRatio * styleHeight) : Math.round(pixelRatio * realHeight);\n\n  const viewportWidth = scaleToView ? Math.round(styleWidth) : Math.round(realWidth);\n  const viewportHeight = scaleToView ? Math.round(styleHeight) : Math.round(realHeight);\n\n  const scaleX = canvasWidth / width;\n  const scaleY = canvasHeight / height;\n\n  // Assign to current props\n  return {\n    bleed,\n    pixelRatio,\n    width,\n    height,\n    dimensions: [ width, height ],\n    units: units || 'px',\n    scaleX,\n    scaleY,\n    pixelsPerInch,\n    viewportWidth,\n    viewportHeight,\n    canvasWidth,\n    canvasHeight,\n    trimWidth,\n    trimHeight,\n    styleWidth,\n    styleHeight\n  };\n}\n","module.exports = getCanvasContext\nfunction getCanvasContext (type, opts) {\n  if (typeof type !== 'string') {\n    throw new TypeError('must specify type string')\n  }\n\n  opts = opts || {}\n\n  if (typeof document === 'undefined' && !opts.canvas) {\n    return null // check for Node\n  }\n\n  var canvas = opts.canvas || document.createElement('canvas')\n  if (typeof opts.width === 'number') {\n    canvas.width = opts.width\n  }\n  if (typeof opts.height === 'number') {\n    canvas.height = opts.height\n  }\n\n  var attribs = opts\n  var gl\n  try {\n    var names = [ type ]\n    // prefix GL contexts\n    if (type.indexOf('webgl') === 0) {\n      names.push('experimental-' + type)\n    }\n\n    for (var i = 0; i < names.length; i++) {\n      gl = canvas.getContext(names[i], attribs)\n      if (gl) return gl\n    }\n  } catch (e) {\n    gl = null\n  }\n  return (gl || null) // ensure null on fail\n}\n","import assign from 'object-assign';\nimport getCanvasContext from 'get-canvas-context';\nimport { isBrowser } from '../util';\n\nfunction createCanvasElement () {\n  if (!isBrowser()) {\n    throw new Error('It appears you are runing from Node.js or a non-browser environment. Try passing in an existing { canvas } interface instead.');\n  }\n  return document.createElement('canvas');\n}\n\nexport default function createCanvas (settings = {}) {\n  let context, canvas;\n  let ownsCanvas = false;\n  if (settings.canvas !== false) {\n    // Determine the canvas and context to create\n    context = settings.context;\n    if (!context || typeof context === 'string') {\n      let newCanvas = settings.canvas;\n      if (!newCanvas) {\n        newCanvas = createCanvasElement();\n        ownsCanvas = true;\n      }\n      const type = context || '2d';\n      if (typeof newCanvas.getContext !== 'function') {\n        throw new Error(`The specified { canvas } element does not have a getContext() function, maybe it is not a <canvas> tag?`);\n      }\n      context = getCanvasContext(type, assign({}, settings.attributes, { canvas: newCanvas }));\n      if (!context) {\n        throw new Error(`Failed at canvas.getContext('${type}') - the browser may not support this context, or a different context may already be in use with this canvas.`);\n      }\n    }\n\n    canvas = context.canvas;\n    // Ensure context matches user's canvas expectations\n    if (settings.canvas && canvas !== settings.canvas) {\n      throw new Error('The { canvas } and { context } settings must point to the same underlying canvas element');\n    }\n\n    // Apply pixelation to canvas if necessary, this is mostly a convenience utility\n    if (settings.pixelated) {\n      context.imageSmoothingEnabled = false;\n      context.mozImageSmoothingEnabled = false;\n      context.oImageSmoothingEnabled = false;\n      context.webkitImageSmoothingEnabled = false;\n      context.msImageSmoothingEnabled = false;\n      canvas.style['image-rendering'] = 'pixelated';\n    }\n  }\n  return { canvas, context, ownsCanvas };\n}\n","import assign from 'object-assign';\nimport rightNow from 'right-now';\nimport isPromise from 'is-promise';\nimport { isBrowser, defined, isWebGLContext, isCanvas, getClientAPI } from '../util';\nimport deepEqual from 'deep-equal';\nimport {\n  resolveFilename,\n  saveFile,\n  saveDataURL,\n  getTimeStamp,\n  exportCanvas,\n  streamStart,\n  streamEnd\n} from '../save';\nimport { checkSettings } from '../accessibility';\n\nimport keyboardShortcuts from './keyboardShortcuts';\nimport resizeCanvas from './resizeCanvas';\nimport createCanvas from './createCanvas';\n\nclass SketchManager {\n  constructor () {\n    this._settings = {};\n    this._props = {};\n    this._sketch = undefined;\n    this._raf = null;\n\n    // Some hacky things required to get around p5.js structure\n    this._lastRedrawResult = undefined;\n    this._isP5Resizing = false;\n\n    this._keyboardShortcuts = keyboardShortcuts({\n      enabled: () => this.settings.hotkeys !== false,\n      save: (ev) => {\n        if (ev.shiftKey) {\n          if (this.props.recording) {\n            this.endRecord();\n            this.run();\n          } else this.record();\n        } else if (!this.props.recording) {\n          this.exportFrame();\n        }\n      },\n      togglePlay: () => {\n        if (this.props.playing) this.pause();\n        else this.play();\n      },\n      commit: (ev) => {\n        this.exportFrame({ commit: true });\n      }\n    });\n\n    this._animateHandler = () => this.animate();\n\n    this._resizeHandler = () => {\n      const changed = this.resize();\n      // Only re-render when size actually changes\n      if (changed) {\n        this.render();\n      }\n    };\n  }\n\n  get sketch () {\n    return this._sketch;\n  }\n\n  get settings () {\n    return this._settings;\n  }\n\n  get props () {\n    return this._props;\n  }\n\n  _computePlayhead (currentTime, duration) {\n    const hasDuration = typeof duration === 'number' && isFinite(duration);\n    return hasDuration ? currentTime / duration : 0;\n  }\n\n  _computeFrame (playhead, time, totalFrames, fps) {\n    return (isFinite(totalFrames) && totalFrames > 1)\n      ? Math.floor(playhead * (totalFrames - 1))\n      : Math.floor(fps * time);\n  }\n\n  _computeCurrentFrame () {\n    return this._computeFrame(\n      this.props.playhead, this.props.time,\n      this.props.totalFrames, this.props.fps\n    );\n  }\n\n  _getSizeProps () {\n    const props = this.props;\n    return {\n      width: props.width,\n      height: props.height,\n      pixelRatio: props.pixelRatio,\n      canvasWidth: props.canvasWidth,\n      canvasHeight: props.canvasHeight,\n      viewportWidth: props.viewportWidth,\n      viewportHeight: props.viewportHeight\n    };\n  }\n\n  run () {\n    if (!this.sketch) throw new Error('should wait until sketch is loaded before trying to play()');\n\n    // Start an animation frame loop if necessary\n    if (this.settings.playing !== false) {\n      this.play();\n    }\n\n    // Let's let this warning hang around for a few versions...\n    if (typeof this.sketch.dispose === 'function') {\n      console.warn('In canvas-sketch@0.0.23 the dispose() event has been renamed to unload()');\n    }\n\n    // In case we aren't playing or animated, make sure we still trigger begin message...\n    if (!this.props.started) {\n      this._signalBegin();\n      this.props.started = true;\n    }\n\n    // Render an initial frame\n    this.tick();\n    this.render();\n    return this;\n  }\n\n  play () {\n    let animate = this.settings.animate;\n    if ('animation' in this.settings) {\n      animate = true;\n      console.warn('[canvas-sketch] { animation } has been renamed to { animate }');\n    }\n    if (!animate) return;\n    if (!isBrowser()) {\n      console.error('[canvas-sketch] WARN: Using { animate } in Node.js is not yet supported');\n      return;\n    }\n    if (this.props.playing) return;\n    if (!this.props.started) {\n      this._signalBegin();\n      this.props.started = true;\n    }\n\n    // console.log('play', this.props.time)\n\n    // Start a render loop\n    this.props.playing = true;\n    if (this._raf != null) window.cancelAnimationFrame(this._raf);\n    this._lastTime = rightNow();\n    this._raf = window.requestAnimationFrame(this._animateHandler);\n  }\n\n  pause () {\n    if (this.props.recording) this.endRecord();\n    this.props.playing = false;\n\n    if (this._raf != null && isBrowser()) {\n      window.cancelAnimationFrame(this._raf);\n    }\n  }\n\n  togglePlay () {\n    if (this.props.playing) this.pause();\n    else this.play();\n  }\n\n  // Stop and reset to frame zero\n  stop () {\n    this.pause();\n    this.props.frame = 0;\n    this.props.playhead = 0;\n    this.props.time = 0;\n    this.props.deltaTime = 0;\n    this.props.started = false;\n    this.render();\n  }\n\n  record () {\n    if (this.props.recording) return;\n    if (!isBrowser()) {\n      console.error('[canvas-sketch] WARN: Recording from Node.js is not yet supported');\n      return;\n    }\n\n    this.stop();\n    this.props.playing = true;\n    this.props.recording = true;\n\n    const exportOpts = this._createExportOptions({ sequence: true });\n\n    const frameInterval = 1 / this.props.fps;\n    // Render each frame in the sequence\n    if (this._raf != null) window.cancelAnimationFrame(this._raf);\n    const tick = () => {\n      if (!this.props.recording) return Promise.resolve();\n      this.props.deltaTime = frameInterval;\n      this.tick();\n      return this.exportFrame(exportOpts)\n        .then(() => {\n          if (!this.props.recording) return; // was cancelled before\n          this.props.deltaTime = 0;\n          this.props.frame++;\n          if (this.props.frame < this.props.totalFrames) {\n            this.props.time += frameInterval;\n            this.props.playhead = this._computePlayhead(this.props.time, this.props.duration);\n            this._raf = window.requestAnimationFrame(tick);\n          } else {\n            console.log('Finished recording');\n            this._signalEnd();\n            this.endRecord();\n            this.stop();\n            this.run();\n          }\n        });\n    };\n\n    // Trigger a start event before we begin recording\n    if (!this.props.started) {\n      this._signalBegin();\n      this.props.started = true;\n    }\n\n    // Trigger 'begin record' event\n    if (this.sketch && typeof this.sketch.beginRecord === 'function') {\n      this._wrapContextScale(props => this.sketch.beginRecord(props));\n    }\n\n    // Initiate a streaming start if necessary\n    streamStart(exportOpts)\n      .catch(err => {\n        console.error(err);\n      })\n      .then(response => {\n        this._raf = window.requestAnimationFrame(tick);\n      });\n  }\n\n  _signalBegin () {\n    if (this.sketch && typeof this.sketch.begin === 'function') {\n      this._wrapContextScale(props => this.sketch.begin(props));\n    }\n  }\n\n  _signalEnd () {\n    if (this.sketch && typeof this.sketch.end === 'function') {\n      this._wrapContextScale(props => this.sketch.end(props));\n    }\n  }\n\n  endRecord () {\n    const wasRecording = this.props.recording;\n\n    if (this._raf != null && isBrowser()) window.cancelAnimationFrame(this._raf);\n    this.props.recording = false;\n    this.props.deltaTime = 0;\n    this.props.playing = false;\n\n    // Trigger 'end record' event\n    if (wasRecording && this.sketch && typeof this.sketch.endRecord === 'function') {\n      this._wrapContextScale(props => this.sketch.endRecord(props));\n    }\n\n    // tell CLI that stream has finished\n    streamEnd()\n      .catch(err => {\n        console.error(err);\n      });\n  }\n\n  _createExportOptions (opt = {}) {\n    return {\n      sequence: opt.sequence,\n      save: opt.save,\n      fps: this.props.fps,\n      frame: opt.sequence ? this.props.frame : undefined,\n      file: this.settings.file,\n      name: this.settings.name,\n      prefix: this.settings.prefix,\n      suffix: this.settings.suffix,\n      encoding: this.settings.encoding,\n      encodingQuality: this.settings.encodingQuality,\n      timeStamp: opt.timeStamp || getTimeStamp(),\n      totalFrames: isFinite(this.props.totalFrames) ? Math.max(100, this.props.totalFrames) : 1000\n    };\n  }\n\n  exportFrame (opt = {}) {\n    if (!this.sketch) return Promise.all([]);\n    if (typeof this.sketch.preExport === 'function') {\n      this.sketch.preExport();\n    }\n\n    // Options for export function\n    let exportOpts = this._createExportOptions(opt);\n\n    const client = getClientAPI();\n    let p = Promise.resolve();\n    if (client && opt.commit && typeof client.commit === 'function') {\n      const commitOpts = assign({}, exportOpts);\n      const hash = client.commit(commitOpts);\n      if (isPromise(hash)) p = hash;\n      else p = Promise.resolve(hash);\n    }\n\n    return p.then(hash => {\n      return this._doExportFrame(assign({}, exportOpts, { hash: hash || '' }));\n    }).then(result => {\n      // Most common usecase is to export a single layer,\n      // so let's optimize the user experience for that.\n      if (result.length === 1) return result[0];\n      else return result;\n    });\n  }\n\n  _doExportFrame (exportOpts = {}) {\n    this._props.exporting = true;\n\n    // Resize to output resolution\n    this.resize();\n\n    // Draw at this output resolution\n    let drawResult = this.render();\n\n    // The self owned canvas (may be undefined...!)\n    const canvas = this.props.canvas;\n\n    // Get list of results from render\n    if (typeof drawResult === 'undefined') {\n      drawResult = [ canvas ];\n    }\n    drawResult = [].concat(drawResult).filter(Boolean);\n\n    // Transform the canvas/file descriptors into a consistent format,\n    // and pull out any data URLs from canvas elements\n    drawResult = drawResult.map(result => {\n      const hasDataObject = typeof result === 'object' && result && ('data' in result || 'dataURL' in result);\n      const data = hasDataObject ? result.data : result;\n      const opts = hasDataObject ? assign({}, result, { data }) : { data };\n      if (isCanvas(data)) {\n        const encoding = opts.encoding || exportOpts.encoding;\n        const encodingQuality = defined(opts.encodingQuality, exportOpts.encodingQuality, 0.95);\n        const { dataURL, extension, type } = exportCanvas(data, { encoding, encodingQuality });\n        return Object.assign(opts, { dataURL, extension, type });\n      } else {\n        return opts;\n      }\n    });\n\n    // Now return to regular rendering mode\n    this._props.exporting = false;\n    this.resize();\n    this.render();\n\n    // And now we can save each result\n    return Promise.all(drawResult.map((result, i, layerList) => {\n      // By default, if rendering multiple layers we will give them indices\n      const curOpt = assign({\n        extension: '',\n        prefix: '',\n        suffix: ''\n      }, exportOpts, result, {\n        layer: i,\n        totalLayers: layerList.length\n      });\n\n      // If export is explicitly not saving, make sure nothing saves\n      // Otherwise default to the layer save option, or fallback to true\n      const saveParam = exportOpts.save === false ? false : result.save;\n      curOpt.save = saveParam !== false;\n\n      // Resolve a full filename from all the options\n      curOpt.filename = resolveFilename(curOpt);\n\n      // Clean up some parameters that may be ambiguous to the user\n      delete curOpt.encoding;\n      delete curOpt.encodingQuality;\n\n      // Clean it up further by just removing undefined values\n      for (let k in curOpt) {\n        if (typeof curOpt[k] === 'undefined') delete curOpt[k];\n      }\n\n      let savePromise = Promise.resolve({});\n      if (curOpt.save) {\n        // Whether to actually save (download) this fragment\n        const data = curOpt.data;\n        if (curOpt.dataURL) {\n          const dataURL = curOpt.dataURL;\n          savePromise = saveDataURL(dataURL, curOpt);\n        } else {\n          savePromise = saveFile(data, curOpt);\n        }\n      }\n      return savePromise.then(saveResult => {\n        return Object.assign({}, curOpt, saveResult);\n      });\n    })).then(ev => {\n      const savedEvents = ev.filter(e => e.save);\n      if (savedEvents.length > 0) {\n        // Log the saved exports\n        const eventWithOutput = savedEvents.find(e => e.outputName);\n        const isClient = savedEvents.some(e => e.client);\n        const isStreaming = savedEvents.some(e => e.stream);\n        let item;\n        // many files, just log how many were exported\n        if (savedEvents.length > 1) item = savedEvents.length;\n        // in CLI, we know exact path dirname\n        else if (eventWithOutput) item = `${eventWithOutput.outputName}/${savedEvents[0].filename}`;\n        // in browser, we can only know it went to \"browser download folder\"\n        else item = `${savedEvents[0].filename}`;\n        let ofSeq = '';\n        if (exportOpts.sequence) {\n          const hasTotalFrames = isFinite(this.props.totalFrames);\n          ofSeq = hasTotalFrames ? ` (frame ${exportOpts.frame + 1} / ${this.props.totalFrames})` : ` (frame ${exportOpts.frame})`;\n        } else if (savedEvents.length > 1) {\n          ofSeq = ` files`;\n        }\n        const client = isClient ? 'canvas-sketch-cli' : 'canvas-sketch';\n        const action = isStreaming ? 'Streaming into' : 'Exported';\n        console.log(`%c[${client}]%c ${action} %c${item}%c${ofSeq}`, 'color: #8e8e8e;', 'color: initial;', 'font-weight: bold;', 'font-weight: initial;');\n      }\n      if (typeof this.sketch.postExport === 'function') {\n        this.sketch.postExport();\n      }\n      return ev;\n    });\n  }\n\n  _wrapContextScale (cb) {\n    this._preRender();\n    cb(this.props);\n    this._postRender();\n  }\n\n  _preRender () {\n    const props = this.props;\n\n    // Scale context for unit sizing\n    if (!this.props.gl && props.context && !props.p5) {\n      props.context.save();\n      if (this.settings.scaleContext !== false) {\n        props.context.scale(props.scaleX, props.scaleY);\n      }\n    } else if (props.p5) {\n      props.p5.scale(props.scaleX / props.pixelRatio, props.scaleY / props.pixelRatio);\n    }\n  }\n\n  _postRender () {\n    const props = this.props;\n\n    if (!this.props.gl && props.context && !props.p5) {\n      props.context.restore();\n    }\n\n    // Flush by default, this may be revisited at a later point.\n    // We do this to ensure toDataURL can be called immediately after.\n    // Most likely browsers already handle this, so we may revisit this and\n    // remove it if it improves performance without any usability issues.\n    if (props.gl && this.settings.flush !== false && !props.p5) {\n      props.gl.flush();\n    }\n  }\n\n  tick () {\n    if (this.sketch && typeof this.sketch.tick === 'function') {\n      this._preRender();\n      this.sketch.tick(this.props);\n      this._postRender();\n    }\n  }\n\n  render () {\n    if (this.props.p5) {\n      this._lastRedrawResult = undefined;\n      this.props.p5.redraw();\n      return this._lastRedrawResult;\n    } else {\n      return this.submitDrawCall();\n    }\n  }\n\n  submitDrawCall () {\n    if (!this.sketch) return;\n\n    const props = this.props;\n    this._preRender();\n\n    let drawResult;\n\n    if (typeof this.sketch === 'function') {\n      drawResult = this.sketch(props);\n    } else if (typeof this.sketch.render === 'function') {\n      drawResult = this.sketch.render(props);\n    }\n\n    this._postRender();\n\n    return drawResult;\n  }\n\n  update (opt = {}) {\n    // Currently update() is only focused on resizing,\n    // but later we will support other options like switching\n    // frames and such.\n    const notYetSupported = [\n      'animate'\n    ];\n\n    Object.keys(opt).forEach(key => {\n      if (notYetSupported.indexOf(key) >= 0) {\n        throw new Error(`Sorry, the { ${key} } option is not yet supported with update().`);\n      }\n    });\n\n    const oldCanvas = this._settings.canvas;\n    const oldContext = this._settings.context;\n\n    // Merge new options into settings\n    for (let key in opt) {\n      const value = opt[key];\n      if (typeof value !== 'undefined') { // ignore undefined\n        this._settings[key] = value;\n      }\n    }\n\n    // Merge in time props\n    const timeOpts = Object.assign({}, this._settings, opt);\n    if ('time' in opt && 'frame' in opt) throw new Error('You should specify { time } or { frame } but not both');\n    else if ('time' in opt) delete timeOpts.frame;\n    else if ('frame' in opt) delete timeOpts.time;\n    if ('duration' in opt && 'totalFrames' in opt) throw new Error('You should specify { duration } or { totalFrames } but not both');\n    else if ('duration' in opt) delete timeOpts.totalFrames;\n    else if ('totalFrames' in opt) delete timeOpts.duration;\n\n    // Merge in user data without copying\n    if ('data' in opt) this._props.data = opt.data;\n\n    const timeProps = this.getTimeProps(timeOpts);\n    Object.assign(this._props, timeProps);\n\n    // If either canvas or context is changed, we should re-update\n    if (oldCanvas !== this._settings.canvas || oldContext !== this._settings.context) {\n      const { canvas, context } = createCanvas(this._settings);\n\n      this.props.canvas = canvas;\n      this.props.context = context;\n\n      // Delete or add a 'gl' prop for convenience\n      this._setupGLKey();\n\n      // Re-mount the new canvas if it has no parent\n      this._appendCanvasIfNeeded();\n    }\n\n    // Special case to support P5.js\n    if (opt.p5 && typeof opt.p5 !== 'function') {\n      this.props.p5 = opt.p5;\n      this.props.p5.draw = () => {\n        if (this._isP5Resizing) return;\n        this._lastRedrawResult = this.submitDrawCall();\n      };\n    }\n\n    // Update playing state if necessary\n    if ('playing' in opt) {\n      if (opt.playing) this.play();\n      else this.pause();\n    }\n\n    checkSettings(this._settings);\n\n    // Draw new frame\n    this.resize();\n    this.render();\n    return this.props;\n  }\n\n  resize () {\n    const oldSizes = this._getSizeProps();\n\n    const settings = this.settings;\n    const props = this.props;\n\n    // Recompute new properties based on current setup\n    const newProps = resizeCanvas(props, settings);\n\n    // Assign to current props\n    Object.assign(this._props, newProps);\n\n    // Now we actually update the canvas width/height and style props\n    const {\n      pixelRatio,\n      canvasWidth,\n      canvasHeight,\n      styleWidth,\n      styleHeight\n    } = this.props;\n\n    // Update canvas settings\n    const canvas = this.props.canvas;\n    if (canvas && settings.resizeCanvas !== false) {\n      if (props.p5) {\n        // P5.js specific edge case\n        if (canvas.width !== canvasWidth || canvas.height !== canvasHeight) {\n          this._isP5Resizing = true;\n          // This causes a re-draw :\\ so we ignore draws in the mean time... sorta hacky\n          props.p5.pixelDensity(pixelRatio);\n          props.p5.resizeCanvas(canvasWidth / pixelRatio, canvasHeight / pixelRatio, false);\n          this._isP5Resizing = false;\n        }\n      } else {\n        // Force canvas size\n        if (canvas.width !== canvasWidth) canvas.width = canvasWidth;\n        if (canvas.height !== canvasHeight) canvas.height = canvasHeight;\n      }\n      // Update canvas style\n      if (isBrowser() && settings.styleCanvas !== false) {\n        canvas.style.width = `${styleWidth}px`;\n        canvas.style.height = `${styleHeight}px`;\n      }\n    }\n\n    const newSizes = this._getSizeProps();\n    let changed = !deepEqual(oldSizes, newSizes);\n    if (changed) {\n      this._sizeChanged();\n    }\n    return changed;\n  }\n\n  _sizeChanged () {\n    // Send resize event to sketch\n    if (this.sketch && typeof this.sketch.resize === 'function') {\n      this.sketch.resize(this.props);\n    }\n  }\n\n  animate () {\n    if (!this.props.playing) return;\n    if (!isBrowser()) {\n      console.error('[canvas-sketch] WARN: Animation in Node.js is not yet supported');\n      return;\n    }\n    this._raf = window.requestAnimationFrame(this._animateHandler);\n\n    let now = rightNow();\n\n    const fps = this.props.fps;\n    const frameIntervalMS = 1000 / fps;\n    let deltaTimeMS = now - this._lastTime;\n\n    const duration = this.props.duration;\n    const hasDuration = typeof duration === 'number' && isFinite(duration);\n\n    let isNewFrame = true;\n    const playbackRate = this.settings.playbackRate;\n    if (playbackRate === 'fixed') {\n      deltaTimeMS = frameIntervalMS;\n    } else if (playbackRate === 'throttle') {\n      if (deltaTimeMS > frameIntervalMS) {\n        now = now - (deltaTimeMS % frameIntervalMS);\n        this._lastTime = now;\n      } else {\n        isNewFrame = false;\n      }\n    } else {\n      this._lastTime = now;\n    }\n\n    const deltaTime = deltaTimeMS / 1000;\n    let newTime = this.props.time + deltaTime * this.props.timeScale;\n\n    // Handle reverse time scale\n    if (newTime < 0 && hasDuration) {\n      newTime = duration + newTime;\n    }\n\n    // Re-start animation\n    let isFinished = false;\n    let isLoopStart = false;\n\n    const looping = this.settings.loop !== false;\n\n    if (hasDuration && newTime >= duration) {\n      // Re-start animation\n      if (looping) {\n        isNewFrame = true;\n        newTime = newTime % duration;\n        isLoopStart = true;\n      } else {\n        isNewFrame = false;\n        newTime = duration;\n        isFinished = true;\n      }\n\n      this._signalEnd();\n    }\n\n    if (isNewFrame) {\n      this.props.deltaTime = deltaTime;\n      this.props.time = newTime;\n      this.props.playhead = this._computePlayhead(newTime, duration);\n      const lastFrame = this.props.frame;\n      this.props.frame = this._computeCurrentFrame();\n      if (isLoopStart) this._signalBegin();\n      if (lastFrame !== this.props.frame) this.tick();\n      this.render();\n      this.props.deltaTime = 0;\n    }\n\n    if (isFinished) {\n      this.pause();\n    }\n  }\n\n  dispatch (cb) {\n    if (typeof cb !== 'function') throw new Error('must pass function into dispatch()');\n    cb(this.props);\n    this.render();\n  }\n\n  mount () {\n    this._appendCanvasIfNeeded();\n  }\n\n  unmount () {\n    if (isBrowser()) {\n      window.removeEventListener('resize', this._resizeHandler);\n      this._keyboardShortcuts.detach();\n    }\n    if (this.props.canvas.parentElement) {\n      this.props.canvas.parentElement.removeChild(this.props.canvas);\n    }\n  }\n\n  _appendCanvasIfNeeded () {\n    if (!isBrowser()) return;\n    if (this.settings.parent !== false && (this.props.canvas && !this.props.canvas.parentElement)) {\n      const defaultParent = this.settings.parent || document.body;\n      defaultParent.appendChild(this.props.canvas);\n    }\n  }\n\n  _setupGLKey () {\n    if (this.props.context) {\n      if (isWebGLContext(this.props.context)) {\n        this._props.gl = this.props.context;\n      } else {\n        delete this._props.gl;\n      }\n    }\n  }\n\n  getTimeProps (settings = {}) {\n    // Get timing data\n    let duration = settings.duration;\n    let totalFrames = settings.totalFrames;\n    const timeScale = defined(settings.timeScale, 1);\n    const fps = defined(settings.fps, 24);\n    const hasDuration = typeof duration === 'number' && isFinite(duration);\n    const hasTotalFrames = typeof totalFrames === 'number' && isFinite(totalFrames);\n\n    const totalFramesFromDuration = hasDuration ? Math.floor(fps * duration) : undefined;\n    const durationFromTotalFrames = hasTotalFrames ? (totalFrames / fps) : undefined;\n    if (hasDuration && hasTotalFrames && totalFramesFromDuration !== totalFrames) {\n      throw new Error('You should specify either duration or totalFrames, but not both. Or, they must match exactly.');\n    }\n\n    if (typeof settings.dimensions === 'undefined' && typeof settings.units !== 'undefined') {\n      console.warn(`You've specified a { units } setting but no { dimension }, so the units will be ignored.`);\n    }\n\n    totalFrames = defined(totalFrames, totalFramesFromDuration, Infinity);\n    duration = defined(duration, durationFromTotalFrames, Infinity);\n\n    const startTime = settings.time;\n    const startFrame = settings.frame;\n    const hasStartTime = typeof startTime === 'number' && isFinite(startTime);\n    const hasStartFrame = typeof startFrame === 'number' && isFinite(startFrame);\n\n    // start at zero unless user specifies frame or time (but not both mismatched)\n    let time = 0;\n    let frame = 0;\n    let playhead = 0;\n    if (hasStartTime && hasStartFrame) {\n      throw new Error('You should specify either start frame or time, but not both.');\n    } else if (hasStartTime) {\n      // User specifies time, we infer frames from FPS\n      time = startTime;\n      playhead = this._computePlayhead(time, duration);\n      frame = this._computeFrame(\n        playhead, time,\n        totalFrames, fps\n      );\n    } else if (hasStartFrame) {\n      // User specifies frame number, we infer time from FPS\n      frame = startFrame;\n      time = frame / fps;\n      playhead = this._computePlayhead(time, duration);\n    }\n\n    return {\n      playhead,\n      time,\n      frame,\n      duration,\n      totalFrames,\n      fps,\n      timeScale\n    };\n  }\n\n  setup (settings = {}) {\n    if (this.sketch) throw new Error('Multiple setup() calls not yet supported.');\n\n    this._settings = Object.assign({}, settings, this._settings);\n\n    checkSettings(this._settings);\n\n    // Get initial canvas & context\n    const { context, canvas } = createCanvas(this._settings);\n\n    const timeProps = this.getTimeProps(this._settings);\n\n    // Initial render state features\n    this._props = {\n      ...timeProps,\n      canvas,\n      context,\n      deltaTime: 0,\n      started: false,\n      exporting: false,\n      playing: false,\n      recording: false,\n      settings: this.settings,\n      data: this.settings.data,\n\n      // Export some specific actions to the sketch\n      render: () => this.render(),\n      togglePlay: () => this.togglePlay(),\n      dispatch: (cb) => this.dispatch(cb),\n      tick: () => this.tick(),\n      resize: () => this.resize(),\n      update: (opt) => this.update(opt),\n      exportFrame: opt => this.exportFrame(opt),\n      record: () => this.record(),\n      play: () => this.play(),\n      pause: () => this.pause(),\n      stop: () => this.stop()\n    };\n\n    // For WebGL sketches, a gl variable reads a bit better\n    this._setupGLKey();\n\n    // Trigger initial resize now so that canvas is already sized\n    // by the time we load the sketch\n    this.resize();\n  }\n\n  loadAndRun (canvasSketch, newSettings) {\n    return this.load(canvasSketch, newSettings).then(() => {\n      this.run();\n      return this;\n    });\n  }\n\n  unload () {\n    this.pause();\n    if (!this.sketch) return;\n    if (typeof this.sketch.unload === 'function') {\n      this._wrapContextScale(props => this.sketch.unload(props));\n    }\n    this._sketch = null;\n  }\n\n  destroy () {\n    this.unload();\n    this.unmount();\n  }\n\n  load (createSketch, newSettings) {\n    // User didn't specify a function\n    if (typeof createSketch !== 'function') {\n      throw new Error('The function must take in a function as the first parameter. Example:\\n  canvasSketcher(() => { ... }, settings)');\n    }\n\n    if (this.sketch) {\n      this.unload();\n    }\n\n    if (typeof newSettings !== 'undefined') {\n      this.update(newSettings);\n    }\n\n    // This is a bit of a tricky case; we set up the auto-scaling here\n    // in case the user decides to render anything to the context *before* the\n    // render() function... However, users should instead use begin() function for that.\n    this._preRender();\n\n    let preload = Promise.resolve();\n\n    // Because of P5.js's unusual structure, we have to do a bit of\n    // library-specific changes to support it properly.\n    if (this.settings.p5) {\n      if (!isBrowser()) {\n        throw new Error('[canvas-sketch] ERROR: Using p5.js in Node.js is not supported');\n      }\n      preload = new Promise(resolve => {\n        let P5Constructor = this.settings.p5;\n        let preload;\n        if (P5Constructor.p5) {\n          preload = P5Constructor.preload;\n          P5Constructor = P5Constructor.p5;\n        }\n\n        // The sketch setup; disable loop, set sizing, etc.\n        const p5Sketch = p5 => {\n          // Hook in preload if necessary\n          if (preload) p5.preload = () => preload(p5);\n          p5.setup = () => {\n            const props = this.props;\n            const isGL = this.settings.context === 'webgl';\n            const renderer = isGL ? p5.WEBGL : p5.P2D;\n            p5.noLoop();\n            p5.pixelDensity(props.pixelRatio);\n            p5.createCanvas(props.viewportWidth, props.viewportHeight, renderer);\n            if (isGL && this.settings.attributes) {\n              p5.setAttributes(this.settings.attributes);\n            }\n\n            this.update({ p5, canvas: p5.canvas, context: p5._renderer.drawingContext });\n            resolve();\n          };\n        };\n\n        // Support global and instance P5.js modes\n        if (typeof P5Constructor === 'function') {\n          new P5Constructor(p5Sketch);\n        } else {\n          if (typeof window.createCanvas !== 'function') {\n            throw new Error(\"{ p5 } setting is passed but can't find p5.js in global (window) scope. Maybe you did not create it globally?\\nnew p5(); // <-- attaches to global scope\");\n          }\n          p5Sketch(window);\n        }\n      });\n    }\n\n    return preload.then(() => {\n      // Load the user's sketch\n      let loader = createSketch(this.props);\n      if (!isPromise(loader)) {\n        loader = Promise.resolve(loader);\n      }\n      return loader;\n    }).then(sketch => {\n      if (!sketch) sketch = {};\n      this._sketch = sketch;\n\n      // Once the sketch is loaded we can add the events\n      if (isBrowser()) {\n        this._keyboardShortcuts.attach();\n        window.addEventListener('resize', this._resizeHandler);\n      }\n\n      this._postRender();\n\n      // The initial resize() in the constructor will not have\n      // triggered a resize() event on the sketch, since it was before\n      // the sketch was loaded. So we send the signal here, allowing\n      // users to react to the initial size before first render.\n      this._sizeChanged();\n      return this;\n    }).catch(err => {\n      console.warn('Could not start sketch, the async loading function rejected with an error:\\n    Error: ' + err.message);\n      throw err;\n    });\n  }\n}\n\nexport default SketchManager;\n","import SketchManager from './core/SketchManager';\nimport PaperSizes from './paper-sizes';\nimport { getClientAPI, defined } from './util';\n\nconst CACHE = 'hot-id-cache';\nconst runtimeCollisions = [];\n\nfunction isHotReload () {\n  const client = getClientAPI();\n  return client && client.hot;\n}\n\nfunction cacheGet (id) {\n  const client = getClientAPI();\n  if (!client) return undefined;\n  client[CACHE] = client[CACHE] || {};\n  return client[CACHE][id];\n}\n\nfunction cachePut (id, data) {\n  const client = getClientAPI();\n  if (!client) return undefined;\n  client[CACHE] = client[CACHE] || {};\n  client[CACHE][id] = data;\n}\n\nfunction getTimeProp (oldManager, newSettings) {\n  // Static sketches ignore the time persistency\n  return newSettings.animate ? { time: oldManager.props.time } : undefined;\n}\n\nfunction canvasSketch (sketch, settings = {}) {\n  if (settings.p5) {\n    if (settings.canvas || (settings.context && typeof settings.context !== 'string')) {\n      throw new Error(`In { p5 } mode, you can't pass your own canvas or context, unless the context is a \"webgl\" or \"2d\" string`);\n    }\n\n    // Do not create a canvas on startup, since P5.js does that for us\n    const context = typeof settings.context === 'string' ? settings.context : false;\n    settings = Object.assign({}, settings, { canvas: false, context });\n  }\n\n  const isHot = isHotReload();\n  let hotID;\n  if (isHot) {\n    // Use a magic name by default, force user to define each sketch if they\n    // require more than one in an application. Open to other ideas on how to tackle\n    // this as well...\n    hotID = defined(settings.id, '$__DEFAULT_CANVAS_SKETCH_ID__$');\n  }\n  let isInjecting = isHot && typeof hotID === 'string';\n\n  if (isInjecting && runtimeCollisions.includes(hotID)) {\n    console.warn(`Warning: You have multiple calls to canvasSketch() in --hot mode. You must pass unique { id } strings in settings to enable hot reload across multiple sketches. `, hotID);\n    isInjecting = false;\n  }\n\n  let preload = Promise.resolve();\n\n  if (isInjecting) {\n    // Mark this as already spotted in this runtime instance\n    runtimeCollisions.push(hotID);\n\n    const previousData = cacheGet(hotID);\n    if (previousData) {\n      const next = () => {\n        // Grab new props from old sketch instance\n        const newProps = getTimeProp(previousData.manager, settings);\n        // Destroy the old instance\n        previousData.manager.destroy();\n        // Pass along new props\n        return newProps;\n      };\n\n      // Move along the next data...\n      preload = previousData.load.then(next).catch(next);\n    }\n  }\n\n  return preload.then(newProps => {\n    const manager = new SketchManager();\n    let result;\n    if (sketch) {\n      // Merge with incoming data\n      settings = Object.assign({}, settings, newProps);\n\n      // Apply settings and create a canvas\n      manager.setup(settings);\n\n      // Mount to DOM\n      manager.mount();\n\n      // load the sketch first\n      result = manager.loadAndRun(sketch);\n    } else {\n      result = Promise.resolve(manager);\n    }\n    if (isInjecting) {\n      cachePut(hotID, { load: result, manager });\n    }\n    return result;\n  });\n}\n\n// TODO: Figure out a nice way to export things.\ncanvasSketch.canvasSketch = canvasSketch;\ncanvasSketch.PaperSizes = PaperSizes;\n\nexport default canvasSketch;\n"],"names":["global","let","arguments","isDOM","toStr","require$$0","isArguments","keysShim","isArgs","slice","implementation","bind","hasToStringTag","has","keys","toObject","supportsDescriptors","gOPD","TypeErr","defineProperty","polyfill","getPolyfill","define","is","flags","isDate","this","repeat","const","assign","defined","convertDistance","getCanvasContext","rightNow","isPromise","deepEqual","PaperSizes"],"mappings":"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"}